# 変数～動的なプログラム～
ボタンを押したら、ボタンが動く方向を反転させるにはどうしたらよいだろうか。

## 問題点
- プログラムに、移動する距離を書き込んでしまうと、実行後に値を書き換えることができないので、動きを変えられない。


## 解決策

- 値を記録することができる**変数**を使うことで、移動速度を変数扱って、**実行時に値を変えられる**ようにする。

ちなみに、実行時に値を変更できない値を**定数**という。

## C#での変数の使い方
1. 記録するデータの型と、変数名を指定して、**宣言**する
2. 宣言した変数に、値を代入する
3. 値を設定した変数を、式の中などに書いて利用する

## 変数定義の書き方
int型のaという名前の変数を定義する。

```cs
int a;
```

float型のfwという名前の変数を定義する。

```cs
float fw;
```

string型のstrという名前の変数を定義する。

```cs
string str;
```

bool型のblという名前の変数を定義

```cs
bool bl;
```

int型のbという名前の変数を定義し、10を代入する。

```cs
int b = 10;
```

float型のfw2という名前の変数を定義し、-10.5を代入する。

```cs
float fw2 = -10.5f;
```

string型のstr2という名前の変数を定義し、「こんにちは」と代入する。

```cs
string str2 = "こんにちは";
```

## 演習7-1
「演習7-1」ボタンを作成して、クリック時にint型の変数vxを定義して、5を代入。メッセージボックスでvxを表示させてみよう。

動きを確認したら、その下にvxに10を代入して、メッセージボックスでvxを表示させてみよう。

## 演習7-2
「演習7-2」ボタンを作成して、クリック時にメッセージボックスでvxを表示するコードを書いてみよう。Startしようとすると何が起きるか、また、vxはどこで有効か、以下の通り。

### 何が起きる？

エラーになった。

### vxの有効範囲は？

vxを宣言している場所の最寄りの`{`から`}`までの間。


## 演習7-3
クラス定義(class)の直下に、int型の変数vxを定義して、20を代入するコードを追加する。

### 演習7-2と比べてどうなった？

### 演習7-1ボタンと、演習7-2ボタンを交互に押して、それぞれ何が表示されるか？

- 演習7-1・・・(   5 と 10 )
- 演習7-2・・・(    20    )
- 分かったこと
  - 階層が違えば、同じ名前の変数を宣言できて、それぞれの階層内で独立して値を記録できる
  - 文法としては使えるが、原則としてこのようなことはしないこと

## データの代入方法
定義済みのint型変数aに、100を代入する。

```cs
a = 100;
```

定義済みのfloat型変数fwに、3.14を代入する。

```cs
fw = 3.14f;
```

定義済みのstring型変数strに、「こんにちは」を代入する。

```cs
str = "こんにちは";
```

定義済みのbool型変数blに、falseを代入する。

```cs
bl = false;
```

## 演習7-4
「演習7-4」ボタンを作成して、vxを10増やして、vxをMessageBoxで表示するコードを入力したらStartして、以下に解答しよう。

次の順番にボタンを押して、表示される内容を記入しよう。
- 演習7-2： 20      外側のvx
- 演習7-1： 5と10   内側のvx
- 演習7-2： 20      外側のvx
- 演習7-4： 25	     外側のvxに5を足した
- 演習7-2： 25      外側のvx
- 演習7-1： 5と10   内側のvx
- 演習7-4： 30      外側のvxに5を足した
- 演習7-2： 30      外側のvx

### 分かったことをまとめよう

- 変数は、宣言した**ブロック**(`{`～`}`で囲まれた範囲のこと)内で有効
- 内側のブロックで宣言した変数は、外側の影響を受けず、外側へ影響を与えることもない
- 内側のブロックの変数は、外側では消える
 
## 変数の有効範囲
|-              |定義する場所|有効範囲|
|:-------------:|-----------|-------|
|ローカル変数    | 関数やメソッドなどのブロック内 | そのブロック内  |
|インスタンス変数| classの直下 | そのクラスが有効な間(プログラムの実行中が多い)   |
|クラス変数     | classの直下でstaticキーワードをつける | ずっと。全インスタンスで１つの場所を参照する |

- インスタンス = 実体、実例 = Instance

##	変数名の制約やルール
- 変数名の最初の1文字目は、(アルファベット)か(アンダーバー`_` )
- 2文字目以降は、(アルファベット )か(アンダーバー )か(数字 )
- (予約語 )は使えない(例 intやstringなど、その言語が使っている意味のあるキーワード)
- (キャメルケース )：HelloWorld / helloWorld
- (スネークケース )：hello_world
- (ケバブケース )(C#では不可)：hello-world / Hello-World
  - [日本語から変数や関数名の候補を出してくれるやつ](https://codic.jp/engine)

## 注意！
- 変数名には日本語も使えるが、使うことは一般的ではない。変な癖を付けないように日本語の変数や関数名は使わないようにしよう！
- プログラム関連のファイル名に日本語を使うことはやめよう！

## 演習7-5
以下のようなプログラムを作成してみよう。
- Timerを置いて、Enabledをtrueにして、timer1をダブルクリック
- エディタが開いた場所に、演習7-4ボタンのLeftプロパティが vx 増えるようにする
- Startして、演習7-4ボタンを押して、動作を確認しよう

## 違う型の変数への代入
型が違う変数への代入には、エラーを避けるために明示的に型を変換する手続きが必要な場合がある。これを**型キャスト**という。以下にまとめる。

string型変数str に、int型変数aの値を代入する。

```cs
str = a.ToString();
```

string型変数strに、float型変数fwの値を代入する。

```cs

```

int型変数aに、float型変数fwの値を代入する。

```cs

```

int型変数aに、string型変数strの値を代入する。

```cs

```

float型変数fwに、int型変数aの値を代入する。

```cs

```

float型変数fwに、string型変数strの値を代入する。

```cs

```

---

[前へ](06.md) | [目次へ](README.md#%E7%9B%AE%E6%AC%A1) | [次へ](08.md)
